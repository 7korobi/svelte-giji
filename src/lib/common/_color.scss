@use "sass:color";
@use "sass:string";
@use "sass:math";

@function HSYA($HH, $SS, $YY, $AA: 1) {
  $HH: $HH % 360;
  $LL: Y2L($HH, $SS, $YY);
  @return hsla($HH, $SS, $LL, $AA);
}

@function fixByContrast($fixS, $fixY, $contrast, $HD, $col) {
  $newCol: $col;
  @for $step from 0 to 500 {
    $saturation: math.clamp(-100%, $step * $fixS, 100%);
    $lightness: math.clamp(-100%, $step * $fixY, 100%);
    $newCol: color.adjust($col, $hue: $HD, $saturation: $saturation, $lightness: $lightness);
    $cRatio: contrastRatio($col, $newCol);
    @if black == $newCol or white == $newCol or $contrast < $cRatio {
      // @debug "(#{$step} #{$cRatio}) #{$col} => #{$newCol}";
      @return $newCol;
    }
  }
  @return $newCol;
}
